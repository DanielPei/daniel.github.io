<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Python-environment-management: pyenv + virtualenv + virtaulenvwrapper | Daniel&#39;s blogs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="[TOC] pyenv 与 virtualenv 是两个目的不同的 python 环境管理工具。 pyenv ： 版本切换。用于在多个不同的python版本之间进行切换并互不影响。  需要临时引用／安装当前python版本不支持的模块／库； 测试／验证不同python版本间兼容性；  virtualenv : site-packages隔离。为某个项目或目录创建一个独立的 python 环境，该环">
<meta name="keywords" content="python,pyenv,virtualenv">
<meta property="og:type" content="article">
<meta property="og:title" content="Python-environment-management: pyenv + virtualenv + virtaulenvwrapper">
<meta property="og:url" content="https:&#x2F;&#x2F;danielpei.github.io&#x2F;2019&#x2F;11&#x2F;07&#x2F;pyenv-and-virtualenv-for-python&#x2F;index.html">
<meta property="og:site_name" content="Daniel&#39;s blogs">
<meta property="og:description" content="[TOC] pyenv 与 virtualenv 是两个目的不同的 python 环境管理工具。 pyenv ： 版本切换。用于在多个不同的python版本之间进行切换并互不影响。  需要临时引用／安装当前python版本不支持的模块／库； 测试／验证不同python版本间兼容性；  virtualenv : site-packages隔离。为某个项目或目录创建一个独立的 python 环境，该环">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-11-12T15:29:37.000Z">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Daniel&#39;s blogs" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Daniel&#39;s blogs</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://danielpei.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-pyenv-and-virtualenv-for-python" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/07/pyenv-and-virtualenv-for-python/" class="article-date">
  <time datetime="2019-11-07T15:20:33.000Z" itemprop="datePublished">2019-11-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>►<a class="article-category-link" href="/categories/python/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Python-environment-management: pyenv + virtualenv + virtaulenvwrapper
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<p><strong>pyenv</strong> 与 <strong>virtualenv</strong> 是两个目的不同的 python 环境管理工具。</p>
<p><strong>pyenv</strong> ： <strong>版本切换</strong>。用于在多个不同的python版本之间进行切换并互不影响。</p>
<ul>
<li>需要临时<strong>引用／安装</strong>当前python版本不支持的模块／库；</li>
<li>测试／验证不同python版本间兼容性；</li>
</ul>
<p><strong>virtualenv</strong> : <strong>site-packages隔离</strong>。为某个项目或目录创建一个独立的 python 环境，该环境不受当前系统已经安装的 python 包影响。同时，在该环境中安装 python 包也不会影响其他项目。</p>
<ul>
<li>需要使用某一个工具／模块／类库的不同版本；</li>
</ul>
<p><strong>virtaulenvwrapper</strong> 则是对 <strong>virtualenv</strong> 创建的虚拟环境进行管理的工具。</p>
<ul>
<li>快速激活／去激活某个 virtualenv 创建的虚拟环境；</li>
</ul>
<h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew install pyenv</span><br><span class="line">pip install virtualenv</span><br><span class="line">pip install virtualenvwrapper</span><br><span class="line"></span><br><span class="line"><span class="comment"># add the below line into ~/.bash_profile or ~/.zshrc, to auto-active pyenv</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">which</span> pyenv &gt; /dev/null; <span class="keyword">then</span> <span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init -)</span>"</span>; <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a root path for virtualenvs we will created by virtualenv and virtualenvwrapper.</span></span><br><span class="line">mkdir ~/.virtualenvs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set default path for virutalenvs in .zshrc or .bashrc.</span></span><br><span class="line"><span class="built_in">export</span> WORKON_HOME=~/.virtualenvs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable virutalenvwrapper in .zshrc or .bashrc.</span></span><br><span class="line"><span class="comment">## As I am using python 3.7 created by pyenv, my virtualenvwrapper.sh script is located in */Users/daniel/.pyenv/versions/3.7.0/bin/virtualenvwrapper.sh*.</span></span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/bin/virtualenvwrapper.sh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable virutalwrapper right now!</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>

<h2 id="2-pyenv"><a href="#2-pyenv" class="headerlink" title="2. pyenv"></a>2. pyenv</h2><p><strong>场景</strong>：Mac 自带的 python 版本为 2.7，遇到一个项目 <em>py3_project</em> 使用 python 3.X 的一些新特性，这时就需要用到 pyenv 将 python 版本临时切换到 3.X (随时可以一条命令再切换回来）。</p>
<p>pyenv 常用命令及场景：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前系统 python 版本：</span></span><br><span class="line">python --version</span><br><span class="line"><span class="comment"># Python 2.7.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看本地 pyenv 当前有哪些版本。可以看到当前直邮系统默认的 python 版本。</span></span><br><span class="line">pyenv versions</span><br><span class="line">* system (<span class="built_in">set</span> by /Users/daniel/.pyenv/version)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 python 3.7.0 </span></span><br><span class="line">pyenv install 3.7.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前已安装版本。 system 前的 * 表示当前正在使用的 python 版本</span></span><br><span class="line">pyenv versions</span><br><span class="line">* system (<span class="built_in">set</span> by /Users/daniel/.pyenv/version)</span><br><span class="line">  3.7.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到 3.7.0 版本</span></span><br><span class="line">mkdir py3_project</span><br><span class="line"><span class="built_in">cd</span> py3_project</span><br><span class="line">pyenv <span class="built_in">local</span> 3.7.0	<span class="comment"># 只切换本目录。 如果希望全局切换，使用 pyenv global 3.7.0</span></span><br><span class="line"></span><br><span class="line">pyenv versions 		<span class="comment"># 本目录切换为 3.7.0 </span></span><br><span class="line">  system</span><br><span class="line">* 3.7.0 (<span class="built_in">set</span> by PYENV_VERSION environment variable)</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">pyenv versions		<span class="comment"># 其他目录未受影响，仍未系统python版本</span></span><br><span class="line">* system (<span class="built_in">set</span> by /Users/daniel/.pyenv/version)</span><br><span class="line">  3.7.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复项目或目录python版本（一般用不到）</span></span><br><span class="line"><span class="built_in">cd</span> py3_project</span><br><span class="line">pyenv <span class="built_in">local</span> system</span><br><span class="line"></span><br><span class="line">pyenv versions</span><br><span class="line">* system (<span class="built_in">set</span> by /Users/daniel/pyenv_demo/.python-version)</span><br><span class="line">  3.7.0</span><br></pre></td></tr></table></figure>

<p>pyenv 帮助:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pyenv</span><br><span class="line">pyenv 1.2.10</span><br><span class="line">Usage: pyenv &lt;<span class="built_in">command</span>&gt; [&lt;args&gt;]</span><br><span class="line"></span><br><span class="line">Some useful pyenv commands are:</span><br><span class="line">   commands    List all available pyenv commands</span><br><span class="line">   <span class="built_in">local</span>       Set or show the <span class="built_in">local</span> application-specific Python version</span><br><span class="line">   global      Set or show the global Python version</span><br><span class="line">   shell       Set or show the shell-specific Python version</span><br><span class="line">   install     Install a Python version using python-build</span><br><span class="line">   uninstall   Uninstall a specific Python version</span><br><span class="line">   <span class="built_in">rehash</span>      Rehash pyenv shims (run this after installing executables)</span><br><span class="line">   version     Show the current Python version and its origin</span><br><span class="line">   versions    List all Python versions available to pyenv</span><br><span class="line">   <span class="built_in">which</span>       Display the full path to an executable</span><br><span class="line">   <span class="built_in">whence</span>      List all Python versions that contain the given executable</span><br></pre></td></tr></table></figure>

<h2 id="3-virtualenv-virtualenvwrapper"><a href="#3-virtualenv-virtualenvwrapper" class="headerlink" title="3. virtualenv  + virtualenvwrapper"></a>3. virtualenv  + virtualenvwrapper</h2><p><strong>场景</strong>：同时有两个项目 A 和 B，都需要使用 request 包，但由于外部依赖或兼容老系统等原因，A 和 B 需要使用的 request 包的版本有差异。此时，可以创建两个不同的虚拟环境，在各自的环境下分别安装对应版本的 request 包。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a virtualenv named py3dev.</span></span><br><span class="line">mkvirtualenv py3dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a virtualenv named py3dev ignore the system site packages.</span></span><br><span class="line">mkvirtualenv --no-site-packages py3dev </span><br><span class="line"></span><br><span class="line"><span class="comment"># List virutalenvs.</span></span><br><span class="line">lsvirtualenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># Work on a *py3dev* virutalenv.</span></span><br><span class="line">workon py3dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># Exit a virtualenv</span></span><br><span class="line">deactivate</span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove a virutalenv</span></span><br><span class="line">rmvirtualenv py3dev</span><br></pre></td></tr></table></figure>

<h2 id="4-Task-：-分别创建-python-2-X-和-python-3-X-的虚拟环境"><a href="#4-Task-：-分别创建-python-2-X-和-python-3-X-的虚拟环境" class="headerlink" title="4. Task ： 分别创建 python 2.X 和 python 3.X 的虚拟环境"></a>4. Task ： 分别创建 python 2.X 和 python 3.X 的虚拟环境</h2><p>python 2.X 虚拟环境创建</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#确保切换成功，我建议 source .zshrc 一下在切换</span></span><br><span class="line"><span class="comment">#安装全新的Python2.7.10版本</span></span><br><span class="line">pyenv install 2.7.10</span><br><span class="line">pyenv <span class="built_in">rehash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#切换到刚安装的这个版本</span></span><br><span class="line">pyenv <span class="built_in">local</span> 2.7.10</span><br><span class="line"><span class="comment">#确保切换成功</span></span><br><span class="line"><span class="built_in">source</span> .zshrc</span><br><span class="line"><span class="comment">#验证一下版本,pip发现里面包很少</span></span><br><span class="line">pip list</span><br><span class="line"><span class="comment">#验证版本</span></span><br><span class="line">python -V</span><br><span class="line"><span class="comment">#务必在这个新的2.7.10中安装</span></span><br><span class="line">pip install virtualenv</span><br><span class="line">pip install virtualenvwrapper</span><br><span class="line"><span class="comment">#务必</span></span><br><span class="line"><span class="built_in">source</span> .zshrc</span><br><span class="line"><span class="comment">#创建2.7.10的开发环境</span></span><br><span class="line">mkvirtualenv py2dev</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建完某版本的开发环境后务必退出，当前虚拟环境，不然就是虚拟环境中在创建了。</span></span><br><span class="line">deactivate</span><br><span class="line"><span class="comment">#退出2.7.10环境</span></span><br><span class="line">pyenv <span class="built_in">local</span> --<span class="built_in">unset</span> 2.7.10</span><br><span class="line"><span class="built_in">source</span> .zshrc</span><br></pre></td></tr></table></figure>

<p>python 3.x 虚拟环境创建类似 2.x</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://danielpei.github.io/2019/11/07/pyenv-and-virtualenv-for-python/" data-id="ck2w0i2og000bckhjc0q3d3yu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pyenv/" rel="tag">pyenv</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/virtualenv/" rel="tag">virtualenv</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2019/11/05/pydoc-basic-command/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">pydoc-basic-command</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/python/pydoc/">pydoc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/tools/">tools</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pydoc/" rel="tag">pydoc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyenv/" rel="tag">pyenv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/virtualenv/" rel="tag">virtualenv</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/pydoc/" style="font-size: 10px;">pydoc</a> <a href="/tags/pyenv/" style="font-size: 10px;">pyenv</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/virtualenv/" style="font-size: 10px;">virtualenv</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/11/07/pyenv-and-virtualenv-for-python/">Python-environment-management: pyenv + virtualenv + virtaulenvwrapper</a>
          </li>
        
          <li>
            <a href="/2019/11/05/pydoc-basic-command/">pydoc-basic-command</a>
          </li>
        
          <li>
            <a href="/2019/10/31/Deploy-hexo-blog-to-githubPage/">01-Deploy hexo blog to githubPage</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Daniel Pei<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>